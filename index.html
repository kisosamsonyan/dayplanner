<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="main.css">
    <script src="moment.js"></script>

    <title>Day Planner</title>
</head>

<body
    background="https://images.unsplash.com/photo-1566041510394-cf7c8fe21800?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=668&q=80">
    <table>

        <div class="title">DAILY PLANNER</div>
        <br>
        <div id="dateTime">October 28th 2019, 8:25 PM</div>


        <tr>
            <th>Time</th>
            <th></th>

        </tr>
        <tr>
            <td id="9">9:00 am</td>
            <td id="9am">
                <input id="9amtodo" type="text">
                <button id="9amsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="10">10:00 am</td>
            <td id="10am">
                <input id="10amtodo" type="text">
                <button id="10amsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="11">11:00 am</td>
            <td id="11am">
                <input id="11amtodo" type="text">
                <button id="11amsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="12">12:00 pm</td>
            <td id="12pm">
                <input id="12pmtodo" type="text">
                <button id="12pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="13">1:00 pm</td>
            <td id="1pm">
                <input id="1pmtodo" type="text">
                <button id="1pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="14">2:00 pm</td>
            <td id="2pm">
                <input id="2pmtodo" type="text">
                <button id="2pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="15">3:00 pm</td>
            <td id="3pm">
                <input id="3pmtodo" type="text">
                <button id="3pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="16">4:00 pm</td>
            <td id="4pm">
                <input id="4pmtodo" type="text">
                <button id="4pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
        <tr>
            <td id="17">5:00 pm</td>
            <td id="5pm">
                <input id="5pmtodo" type="text">
                <button id="5pmsubmitBtn" type="button">Submit</button>
            </td>
        </tr>
    </table>
    <script type="text/javascript">
        const dateTime = document.getElementById("dateTime");
        const inputArray = document.querySelectorAll('input') // Goes and gets all the input elements on the page and returns them in an array
        const submitBtnArray = document.querySelectorAll('button') // Goes and gets all the button elements on the page and returns them in an array
        
        //Setting the date and time with moment.js
        const now = moment();
            const humanReadable = now.format('MMMM Do YYYY, LT');
            dateTime.textContent = humanReadable;

        function updateTime() {

            const now = moment();
            const humanReadable = now.format('MMMM Do YYYY, LT');
            dateTime.textContent = humanReadable;

        }

        setInterval(updateTime, 1000);
        updateTime();


        // ADD EVENT LISTENERS TO EACH BUTTON
        /*
        Remember 'submitBtnArray' is an array. Arrays have special built in functions that we can call on to perform different operations
        on the array. Below I'm using the forEach method to loop through every button in the array and add an event listener to each one  
        */
        submitBtnArray.forEach((btn) => { btn.addEventListener('click', handleSubmit) })

        // LOAD INPUTS WITH INFO FROM LOCAL STRORAGE

         /*
        Remember 'inputArray' is an array. Arrays have special built in functions that we can call on to perform different operations
        on the array. Below I'm using the forEach method to loop through every input in the array to set its value to what's in local storage  
        */
        inputArray.forEach((input) => input.value = localStorage.getItem(input.id))

        // SUBMIT BUTTON FUNCTION
        function handleSubmit(e) {
            let input = e.target.parentNode.firstChild.nextElementSibling
            let id = input.id
            let memo = input.value
            localStorage.setItem(id, memo);
        }

        
        var time = document.querySelectorAll("td");
        var timeSlots = [];
        console.log(timeSlots)
        for (let i=9; i< time.length; i++) {
            timeSlots.push(document.getElementById(`${i}`));
        }
        console.log(timeSlots[0].id)

        timeSlots.forEach((timeSlot)=> {
            // console.log(Date.now())
        })

        
        colors(timeSlots[0], 17)


    </script>
    <script src="test.js"></script>
</body>

</html>